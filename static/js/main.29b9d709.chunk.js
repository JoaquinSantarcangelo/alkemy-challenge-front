(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(28),c=n.n(i),s=n(18),r=n.n(s),o=n(22),l=n(3),d=n(13),j=n(4),u=n(52),b=n(51),h=n(2),O={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:1}},exit:{opacity:0}},p=function(e){var t=e.login,n=Object(a.useState)(""),i=Object(l.a)(n,2),c=i[0],s=i[1],r=Object(a.useState)(""),o=Object(l.a)(r,2),j=o[0],u=o[1],p=Object(a.useState)(""),m=Object(l.a)(p,2);m[0],m[1];return Object(h.jsxs)(b.a.div,{variants:O,initial:"hidden",animate:"visible",exit:"exit",className:"login",children:[Object(h.jsx)("div",{id:"error-login",className:"error hidden"}),Object(h.jsxs)(b.a.div,{variants:O,className:"card",children:[Object(h.jsx)("h1",{children:"Welcome!"}),Object(h.jsxs)("div",{className:"wrapper",children:[Object(h.jsx)("input",{type:"email",name:"email",id:"email",placeholder:"Email adress",onChange:function(e){return s(e.target.value)},value:c}),Object(h.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Password",onChange:function(e){return u(e.target.value)},value:j}),Object(h.jsx)("div",{className:"button",onClick:function(){""!==c&&""!==j?(document.getElementById("error-login").classList.add("hidden"),t({email:c,password:j})):(document.getElementById("error-login").classList.remove("hidden"),document.getElementById("error-login").innerHTML="Please fill all the inputs")},children:"Login"})]}),Object(h.jsx)("div",{className:"info-text",children:Object(h.jsxs)("div",{className:"text",children:["Don't have an account yet? ",Object(h.jsx)(d.b,{to:"/register",children:"Create one!"})]})})]})]})},m={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:1}},exit:{opacity:0}},x=function(e){var t=e.register,n=Object(a.useState)(""),i=Object(l.a)(n,2),c=i[0],s=i[1],r=Object(a.useState)(""),o=Object(l.a)(r,2),j=o[0],u=o[1],O=Object(a.useState)(""),p=Object(l.a)(O,2),x=p[0],v=p[1],g=Object(a.useState)(""),f=Object(l.a)(g,2),y=f[0],N=f[1],C=Object(a.useState)(""),w=Object(l.a)(C,2),T=w[0],E=w[1];return Object(h.jsxs)(b.a.div,{variants:m,initial:"hidden",animate:"visible",exit:"exit",className:"login",children:[Object(h.jsx)("div",{id:"error-register",className:"error hidden"}),Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("h1",{children:"Register"}),Object(h.jsxs)("div",{className:"wrapper",children:[Object(h.jsx)("input",{type:"text",name:"name",id:"name",placeholder:"First Name",value:T,onChange:function(e){return E(e.target.value)}}),Object(h.jsx)("input",{type:"email",name:"email",id:"email",placeholder:"Email adress",value:c,onChange:function(e){return s(e.target.value)}}),Object(h.jsx)("input",{type:"email",name:"email",id:"emailCheck",placeholder:"Confirm email adress",value:j,onChange:function(e){return u(e.target.value)}}),Object(h.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Password",onChange:function(e){return v(e.target.value)},value:x}),Object(h.jsx)("input",{type:"password",name:"password",id:"passwordCheck",placeholder:"Confirm Password",onChange:function(e){return N(e.target.value)},value:y}),Object(h.jsx)("div",{className:"button",onClick:function(){T.length>5&&""!==c&&""!==x&&""!==T?c===j&&x===y?(document.getElementById("error-register").classList.add("hidden"),t({email:c,password:x,name:T})):(document.getElementById("error-register").classList.remove("hidden"),document.getElementById("error-register").innerHTML="Please confirm if email and password matches "):(document.getElementById("error-register").classList.remove("hidden"),document.getElementById("error-register").innerHTML="Please fill all the inputs")},children:"Create account"})]}),Object(h.jsx)("div",{className:"info-text",children:Object(h.jsxs)("div",{className:"text",children:["Already have an account? ",Object(h.jsx)(d.b,{to:"/login",children:"Log in!"})]})})]})]})},v=n(14),g={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:1}},exit:{opacity:0}},f=function(e){var t=e.items,n=e.title,i=e.more,c=e.setActiveTransaction,s=e.setEditModalOpen,r=function(e){var t=e.itemInfo,n=e.i;return Object(h.jsxs)(b.a.div,{variants:g,initial:"hidden",animate:{opacity:1,transition:{delay:n/10}},exit:"exit",onClick:function(){c(t),s(!0)},className:"item",children:[Object(h.jsxs)("div",{className:"wrapper-left",children:[Object(h.jsx)("div",{className:"title",children:t.description}),Object(h.jsx)("div",{className:"type",children:t.category})]}),Object(h.jsxs)("div",{className:"wrapper-right",children:[Object(h.jsxs)("div",{className:"inbound"===t.type?"amount":"amount negative",children:["$",Math.abs(t.amount)]}),Object(h.jsx)("div",{className:"date",children:t.date.substring(0,10)})]})]})},o=Object(a.useState)([]),j=Object(l.a)(o,2),u=j[0],O=j[1],p=Object(a.useState)("all"),m=Object(l.a)(p,2),x=m[0],f=m[1];return Object(a.useEffect)((function(){if("all"===x)O(t);else{var e=t.filter((function(e){return e.category===x}));O(e)}}),[t,x]),Object(h.jsxs)("div",{className:"items",children:[Object(h.jsxs)("div",{className:"wrapper",children:[Object(h.jsx)("h1",{className:"title",children:n}),i&&Object(h.jsx)(d.b,{to:"/abm",className:"more-button",children:Object(h.jsx)(v.e,{})}),!i&&Object(h.jsxs)("select",{id:"category",name:"category",onChange:function(e){return f(e.target.value)},value:x,children:[Object(h.jsx)("option",{value:"all",children:"All"}),Object(h.jsx)("option",{value:"taxes",children:"Taxes"}),Object(h.jsx)("option",{value:"food",children:"Food"}),Object(h.jsx)("option",{value:"health",children:"Health"}),Object(h.jsx)("option",{value:"fun",children:"Fun"})]})]}),u.map((function(e,t){return Object(h.jsx)(r,{itemInfo:e,i:t},e.id)}))]})},y={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:1}},exit:{opacity:0,transition:{when:"afterChildren"}}},N=function(e){var t=e.user,n=e.items,a=e.balance,i=e.setEditModalOpen,c=e.setActiveTransaction;return Object(h.jsx)(b.a.div,{variants:y,initial:"hidden",animate:"visible",exit:"exit",className:"home",children:Object(h.jsxs)("div",{className:"container",children:[Object(h.jsxs)("div",{className:"balance",children:[Object(h.jsxs)("div",{className:"text",children:["Hi ",t.name,Object(h.jsx)("br",{})," ",Object(h.jsx)("span",{children:"Your balance:"})]}),Object(h.jsxs)("div",{className:"amount",children:["$",a]})]}),Object(h.jsx)(f,{items:n.slice(0,9),title:"Last Transactions",more:!0,setEditModalOpen:i,setActiveTransaction:c})]})})},C=function(e){var t=e.addTransaction,n=e.editTransaction,i=e.deleteTransaction,c=e.setEditModalOpen,s=e.activeTransaction,r=e.action,o=Object(a.useState)(""),d=Object(l.a)(o,2),j=d[0],u=d[1],b=Object(a.useState)("inbound"),O=Object(l.a)(b,2),p=O[0],m=O[1],x=Object(a.useState)("Taxes"),g=Object(l.a)(x,2),f=g[0],y=g[1],N=Object(a.useState)(null),C=Object(l.a)(N,2),w=C[0],T=C[1],E=Object(a.useState)(null),S=Object(l.a)(E,2),I=S[0],L=S[1];return Object(a.useEffect)((function(){s&&(s.description&&u(s.description),s.type&&m(s.type),s.category&&y(s.category),s.amount&&T(s.amount),s.date&&(L(s.date.substring(0,10)),document.getElementById("date").valueAsDate=new Date(s.date)))}),[]),Object(h.jsxs)("div",{className:"form",children:["edit"===r&&Object(h.jsx)("div",{onClick:function(){return c(!1)},className:"close-icon",children:Object(h.jsx)(v.g,{})}),Object(h.jsx)("h1",{children:"add"===r?"Add Transaction":"Edit Transaction"}),Object(h.jsxs)("div",{className:"wrapper-top",children:[Object(h.jsx)("input",{type:"text",name:"description",id:"description",placeholder:"Transaction description",value:j,onChange:function(e){return u(e.target.value)}}),"add"===r?Object(h.jsxs)("select",{id:"type",name:"type",onChange:function(e){return m(e.target.value)},value:p,children:[Object(h.jsx)("option",{value:"inbound",children:"Inbound"}),Object(h.jsx)("option",{value:"outbound",children:"Outbound"})]}):Object(h.jsxs)("select",{id:"type",name:"type",value:p,disabled:!0,children:[Object(h.jsx)("option",{value:"inbound",children:"Inbound"}),Object(h.jsx)("option",{value:"outbound",children:"Outbound"})]})]}),Object(h.jsxs)("div",{className:"wrapper-bottom",children:[Object(h.jsxs)("select",{id:"category",name:"category",onChange:function(e){return y(e.target.value)},value:f,children:[Object(h.jsx)("option",{value:"taxes",children:"Taxes"}),Object(h.jsx)("option",{value:"food",children:"Food"}),Object(h.jsx)("option",{value:"health",children:"Health"}),Object(h.jsx)("option",{value:"fun",children:"Fun"})]}),Object(h.jsx)("input",{type:"date",name:"date",id:"date",onChange:function(e){return L(e.target.value)}}),Object(h.jsx)("input",{type:"number",name:"amount",id:"amount",placeholder:"Amount",value:w,onChange:function(e){return T(e.target.value)}})]}),Object(h.jsxs)("div",{className:"wrapper-resp",children:["add"===r?Object(h.jsxs)("select",{id:"type",name:"type",onChange:function(e){return m(e.target.value)},value:p,children:[Object(h.jsx)("option",{value:"inbound",children:"Inbound"}),Object(h.jsx)("option",{value:"outbound",children:"Outbound"})]}):Object(h.jsxs)("select",{id:"type",name:"type",value:p,disabled:!0,children:[Object(h.jsx)("option",{value:"inbound",children:"Inbound"}),Object(h.jsx)("option",{value:"outbound",children:"Outbound"})]}),Object(h.jsx)("input",{type:"number",name:"amount",id:"amount",placeholder:"Amount",value:w,onChange:function(e){return T(e.target.value)}})]}),Object(h.jsxs)("div",{className:"buttons",children:[Object(h.jsxs)("div",{onClick:function(){return function(){var e;console.log("Adding new transaction"),j&&p&&f&&w&&I&&(console.log("Yep"),""!==j&&w>0&&(e={description:j,amount:w,type:p,category:f,date:I})),e?(console.log(e),"add"===r?t(e):n(e)):alert("Completa el formulario")}()},className:"button",children:[Object(h.jsx)(v.a,{})," Confirm"]}),"edit"===r&&Object(h.jsx)("div",{onClick:function(){return i()},className:"button",children:Object(h.jsx)(v.f,{})})]})]})},w={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:1}},exit:{opacity:0}},T=function(e){var t=e.items,n=e.addTransaction,a=e.setEditModalOpen,i=e.setActiveTransaction;return Object(h.jsxs)(b.a.div,{variants:w,initial:"hidden",animate:"visible",exit:"exit",className:"container",children:[Object(h.jsx)(C,{addTransaction:n,action:"add"}),Object(h.jsx)(f,{setActiveTransaction:i,setEditModalOpen:a,items:t,title:"My transactions"})]})},E={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:1}},exit:{opacity:0}},S=function(e){var t=e.setLoggedIn;return Object(h.jsx)(b.a.div,{variants:E,initial:"hidden",animate:"visible",exit:"exit",className:"container",children:Object(h.jsxs)("div",{className:"navbar",children:[Object(h.jsxs)(d.c,{activeClassName:"active-link",exact:!0,to:"/",className:"button",id:"home",children:[Object(h.jsx)("div",{className:"icon",children:Object(h.jsx)(v.b,{})}),Object(h.jsx)("div",{className:"text",children:"Home"})]}),Object(h.jsxs)(d.c,{activeClassName:"active-link",exact:!0,to:"/abm",className:"button",id:"abm",children:[Object(h.jsx)("div",{className:"icon",children:Object(h.jsx)(v.c,{})}),Object(h.jsx)("div",{className:"text",children:"ABM"})]}),Object(h.jsxs)("div",{onClick:function(){return t(!1)},className:"button",id:"logout",children:[Object(h.jsx)("div",{className:"icon",children:Object(h.jsx)(v.d,{})}),Object(h.jsx)("div",{className:"text",children:"Logout"})]})]})})},I={hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}},L=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)({id:1}),s=Object(l.a)(c,2),O=s[0],m=s[1],v=Object(a.useState)([]),g=Object(l.a)(v,2),f=g[0],y=g[1],w=Object(a.useState)(0),E=Object(l.a)(w,2),L=E[0],k=E[1];Object(a.useEffect)((function(){n&&Y()}),[n]),Object(a.useEffect)((function(){f.length>0&&W()}),[f]);var M=Object(a.useState)(!1),A=Object(l.a)(M,2),B=A[0],F=A[1],P=Object(a.useState)(f[0]),H=Object(l.a)(P,2),J=H[0],D=H[1],Y=function(){fetch("http://localhost:5000/api/transactions/".concat(O.id)).then(function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:n=e.sent,console.log("Fetched items: ",n),y(n.reverse());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},$=function(e){console.log("Sending new transaction"),e.user_id=O.id;var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};fetch("http://localhost:5000/api/transactions",t).then((function(e){200===e.status&&(Y(),console.log(e))}))},R=function(e){console.log("Logging in"),console.log(e);var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};fetch("http://localhost:5000/api/accounts/login",t).then(function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=9;break}return e.next=3,t.json();case 3:n=e.sent,a=n.user,m(a),i(!0),e.next=11;break;case 9:document.getElementById("error-login").classList.remove("hidden"),document.getElementById("error-login").innerHTML="Credentials doesn't match";case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},U=function(e){console.log("Signing up"),console.log(e);var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};fetch("http://localhost:5000/api/accounts/register",t).then((function(e){200===e.status&&i(!0)}))},W=function(){var e=Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,f.forEach((function(e){t="inbound"===e.type?parseFloat(t)+parseFloat(e.amount):parseFloat(t)-parseFloat(e.amount)})),k(t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"app",children:Object(h.jsxs)(d.a,{children:[Object(h.jsx)(u.a,{children:B&&Object(h.jsx)(b.a.div,{variants:I,initial:"hidden",animate:"visible",exit:"exit",className:"modal",children:Object(h.jsx)("div",{className:"card",children:Object(h.jsx)(C,{setEditModalOpen:F,activeTransaction:J,deleteTransaction:function(){console.log("Deleting transaction"),fetch("http://localhost:5000/api/transactions/".concat(J.id),{method:"DELETE"}).then((function(e){200===e.status&&(Y(),F(!1))}))},editTransaction:function(e){console.log("Editing transaction");var t={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};fetch("http://localhost:5000/api/transactions/".concat(J.id),t).then((function(e){200===e.status&&(Y(),F(!1))}))},action:"edit"})})})}),n&&Object(h.jsx)(S,{setLoggedIn:i}),Object(h.jsx)(j.b,{render:function(e){var t=e.location;return Object(h.jsx)(u.a,{exitBeforeEnter:!0,children:Object(h.jsxs)(j.d,{location:t,children:[Object(h.jsx)(j.b,{path:"/login",render:function(){return n?Object(h.jsx)(j.a,{to:"/"}):Object(h.jsx)(p,{login:R,setLoggedIn:i})}}),Object(h.jsx)(j.b,{path:"/register",render:function(){return n?Object(h.jsx)(j.a,{to:"/"}):Object(h.jsx)(x,{register:U})}}),Object(h.jsx)(j.b,{path:"/",exact:!0,render:function(){return n?Object(h.jsx)(N,{user:O,items:f,balance:L,setEditModalOpen:F,setActiveTransaction:D}):Object(h.jsx)(j.a,{to:"/login"})}}),Object(h.jsx)(j.b,{path:"/abm",exact:!0,render:function(){return n?Object(h.jsx)(T,{addTransaction:$,items:f,setEditModalOpen:F,setActiveTransaction:D}):Object(h.jsx)(j.a,{to:"/login"})}})]},t.pathname)})}})]})})};n(41),n(42),n(43),n(44),n(45),n(46),n(47),n(48);c.a.render(Object(h.jsx)(L,{}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.29b9d709.chunk.js.map